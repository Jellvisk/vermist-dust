- type: entity
  parent: [BaseMachinePowered, ConstructibleMachine]
  id: Magdock
  name: magdock
  description: Connect grids together using the power of magnets.
  placement:
    mode: SnapgridCenter
  components:
    - type: Physics
    - type: Clickable
    - type: Transform
      noRot: false
    - type: InteractionOutline
    - type: Anchorable
    - type: Rotatable
    - type: Pullable
    - type: Damageable
    - type: MeleeSound
      soundGroups:
        Brute:
          path: "/Audio/Machines/airlock_electrify_off.ogg"
    - type: Docking
      radarColor: darkred
      highlightedRadarColor: mediumvioletred
    - type: DockingSignalControl
    - type: DeviceNetwork
      deviceNetId: Wireless
      receiveFrquencyId: BasicDevice
    - type: WirelessNetworkConnection
      range: 200
    - type: DeviceLinkSource
      ports:
        - DockStatus
    - type: Fixtures
      fixtures:
        fix1:
          shape: !type:PhysShapeAabb
            bounds: "-0.49,-0.49,0.49,-0.35"
          density: 500
          mask:
            - MachineMask
          layer:
            - GlassAirlockLayer
        docking:
          shape: !type:PhysShapeCircle
            radius: 0.3
            position: "0,-0.5"
          hard: false
    - type: DetectGridMerge
    - type: Sprite
      sprite: _Impstation/Structures/Machines/magdock.rsi
      noRot: false
      snapCardinals: false
      layers:
        - state: undocked
          map: ["enum.DockingVisualLayers.Base"]
        - state: undocked_lit
          shader: unshaded
          map: ["enum.DockingVisualLayers.Lights"]
    - type: Appearance
    - type: GenericVisualizer
      visuals:
        enum.DockingVisualLayers.Base:
          connected:
            Docked: {state: "docked"}
            Undocked: {state: "undocked"}
          enum.DockingVisualLayers.Docked:
            connected:
              True: {visible: true}
              False: {visible: false}
          enum.DockingVisualState.Undocked:
            connected:
              True: {visible: false}
              False: {visible: true}
        enum.DockingVisualLayers.Lights:
          connected:
            Docked: {state: "docked_lit"}
            Undocked: {state: "undocked_lit"}
          enum.DockingVisualLayers.Docked:
            connected:
              True: {visible: true}
              False: {visible: false}
          enum.DockingVisualState.Undocked:
            connected:
              True: {visible: false}
              False: {visible: true}
    - type: ApcPowerReceiver
      powerLoad: 20
    - type: Tag
      tags:
        - ForceNoFixRotations
